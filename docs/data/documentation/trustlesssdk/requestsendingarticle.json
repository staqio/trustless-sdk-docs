{"sections":[],"abstract":[{"type":"text","text":"Sending requests to and receiving responses from Staq Server APIs: A detailed walkthrough."}],"schemaVersion":{"patch":0,"minor":3,"major":0},"metadata":{"role":"article","roleHeading":"Article","title":"Request Sending","modules":[{"name":"TrustlessSDK"}]},"seeAlsoSections":[{"title":"Articles","generated":true,"identifiers":["doc:\/\/com.staq.TrustlessSDK\/documentation\/TrustlessSDK\/IntegrationArticle","doc:\/\/com.staq.TrustlessSDK\/documentation\/TrustlessSDK\/PaginatorArticle","doc:\/\/com.staq.TrustlessSDK\/documentation\/TrustlessSDK\/KYCStepsManagerArticle"]}],"variants":[{"paths":["\/documentation\/trustlesssdk\/requestsendingarticle"],"traits":[{"interfaceLanguage":"swift"}]}],"primaryContentSections":[{"content":[{"type":"heading","level":2,"text":"Overview","anchor":"Overview"},{"type":"paragraph","inlineContent":[{"text":"TrustlessSDK provide ability to send API request to Staq Server APIs. All request performing via ","type":"text"},{"identifier":"doc:\/\/com.staq.TrustlessSDK\/documentation\/TrustlessSDK\/TrustlessSDK","type":"reference","isActive":true},{"type":"text","text":" instance using coresponding provider (e.g. "},{"type":"reference","identifier":"doc:\/\/com.staq.TrustlessSDK\/documentation\/TrustlessSDK\/AuthProvider","isActive":true},{"type":"text","text":", "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.staq.TrustlessSDK\/documentation\/TrustlessSDK\/CardsProvider"},{"text":").","type":"text"}]},{"type":"heading","text":"Request Sending","anchor":"Request-Sending","level":3},{"type":"paragraph","inlineContent":[{"type":"text","text":"You can send the request via any data provider of "},{"isActive":true,"identifier":"doc:\/\/com.staq.TrustlessSDK\/documentation\/TrustlessSDK\/TrustlessSDK","type":"reference"},{"text":" by providing the corresponding parameters and optionaly completion handler.","type":"text"}]},{"inlineContent":[{"type":"text","text":"For example, to make a request to get account details you need to use "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.staq.TrustlessSDK\/documentation\/TrustlessSDK\/AccountsProvider\/getAccount(_:completion:)"},{"type":"text","text":" method from "},{"identifier":"doc:\/\/com.staq.TrustlessSDK\/documentation\/TrustlessSDK\/AccountsProvider","type":"reference","isActive":true},{"type":"text","text":":"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["let _ = TrustlessSDK.accountsProvider.getAccount(\"account-number\") { result in","    switch result {","    case .success(let response):","        \/\/ handle account response","    case .failure(let error):","        \/\/ handle response error","    }","}"]},{"type":"heading","level":3,"anchor":"Response-Handling","text":"Response Handling"},{"inlineContent":[{"type":"text","text":"To handle request response or error, you can use the completion callback ("},{"type":"reference","identifier":"doc:\/\/com.staq.TrustlessSDK\/documentation\/TrustlessSDK\/ResultCallback","isActive":true},{"type":"text","text":"). It receives the "},{"identifier":"doc:\/\/com.staq.TrustlessSDK\/documentation\/TrustlessSDK\/ResultValue","isActive":true,"type":"reference"},{"type":"text","text":" object with the response or error over which you can perform the required action. For example, you can handle "},{"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/swift\/string","isActive":true},{"text":" response by providing result callback to ","type":"text"},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.staq.TrustlessSDK\/documentation\/TrustlessSDK\/TrustlessSDK"},{"type":"text","text":":"}],"type":"paragraph"},{"type":"codeListing","syntax":"swift","code":["let completion: ResultCallback<String> = { (result: RequestValue<String>) in ","    switch result {","    case .success(let response):","        \/\/ handle response string","    case .failure(let error):","        \/\/ handle error","    }","}","","\/\/ ...","","let successValue: RequestValue<String> = .success(\"Success\")","let failureValue: RequestValue<String> = .failure(.notInitialized)","","if case .success(let response) = successValue {","    \/\/ you can access response","}","","if case .failure(let error) = failureValue {","    \/\/ you can access error","}"]},{"level":3,"type":"heading","anchor":"Error-Handling","text":"Error Handling"},{"type":"paragraph","inlineContent":[{"text":"To handle specific error, you can use ","type":"text"},{"isActive":true,"type":"reference","identifier":"doc:\/\/com.staq.TrustlessSDK\/documentation\/TrustlessSDK\/TrustlessError"},{"type":"text","text":" object. "},{"isActive":true,"identifier":"doc:\/\/com.staq.TrustlessSDK\/documentation\/TrustlessSDK\/TrustlessError","type":"reference"},{"text":" object includes different type of errors including or donâ€™t spicific properies for this error.","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["var error: TrustlessError?","switch error {","case .notInitialized:","    \/\/ handle not initialized error","case .clientCertificateIsNotProvided:","    \/\/ handle not provided client certificate error","case .server(let code, let message):","   \/\/ handle server error","default:","   \/\/ handle other errors","}"]}],"kind":"content"}],"identifier":{"url":"doc:\/\/com.staq.TrustlessSDK\/documentation\/TrustlessSDK\/RequestSendingArticle","interfaceLanguage":"swift"},"hierarchy":{"paths":[["doc:\/\/com.staq.TrustlessSDK\/documentation\/TrustlessSDK"]]},"kind":"article","references":{"doc://com.staq.TrustlessSDK/documentation/TrustlessSDK/TrustlessSDK":{"type":"topic","identifier":"doc:\/\/com.staq.TrustlessSDK\/documentation\/TrustlessSDK\/TrustlessSDK","fragments":[{"kind":"keyword","text":"enum"},{"text":" ","kind":"text"},{"text":"TrustlessSDK","kind":"identifier"}],"title":"TrustlessSDK","navigatorTitle":[{"text":"TrustlessSDK","kind":"identifier"}],"role":"symbol","kind":"symbol","url":"\/documentation\/trustlesssdk\/trustlesssdk","abstract":[{"type":"text","text":"Core class for interacting with the TrustlessSDK."}]},"doc://com.staq.TrustlessSDK/documentation/TrustlessSDK/ResultValue":{"kind":"symbol","fragments":[{"kind":"keyword","text":"typealias"},{"text":" ","kind":"text"},{"text":"ResultValue","kind":"identifier"}],"title":"ResultValue","identifier":"doc:\/\/com.staq.TrustlessSDK\/documentation\/TrustlessSDK\/ResultValue","type":"topic","url":"\/documentation\/trustlesssdk\/resultvalue","abstract":[{"type":"text","text":"A typealias for the "},{"type":"codeVoice","code":"Result"},{"type":"text","text":" type specialized for the TrustlessSDK, where failures are represented by "},{"code":"TrustlessError","type":"codeVoice"},{"type":"text","text":"."}],"role":"symbol","navigatorTitle":[{"text":"ResultValue","kind":"identifier"}]},"doc://com.staq.TrustlessSDK/documentation/TrustlessSDK/AccountsProvider/getAccount(_:completion:)":{"kind":"symbol","type":"topic","required":true,"abstract":[{"type":"text","text":"Fetch the details of a specific account by its account number."}],"fragments":[{"text":"func","kind":"keyword"},{"kind":"text","text":" "},{"text":"getAccount","kind":"identifier"},{"text":"(","kind":"text"},{"text":"String","kind":"typeIdentifier","preciseIdentifier":"s:SS"},{"kind":"text","text":", "},{"text":"completion","kind":"externalParam"},{"text":": ","kind":"text"},{"kind":"typeIdentifier","text":"ResultCallback","preciseIdentifier":"s:12TrustlessSDK14ResultCallbacka"},{"text":"<","kind":"text"},{"text":"AccountDetails","preciseIdentifier":"s:12TrustlessSDK14AccountDetailsV","kind":"typeIdentifier"},{"text":">) -> ","kind":"text"},{"kind":"typeIdentifier","text":"CancelCallback","preciseIdentifier":"s:12TrustlessSDK14CancelCallbacka"}],"identifier":"doc:\/\/com.staq.TrustlessSDK\/documentation\/TrustlessSDK\/AccountsProvider\/getAccount(_:completion:)","title":"getAccount(_:completion:)","role":"symbol","url":"\/documentation\/trustlesssdk\/accountsprovider\/getaccount(_:completion:)"},"doc://com.staq.TrustlessSDK/documentation/TrustlessSDK/AccountsProvider":{"url":"\/documentation\/trustlesssdk\/accountsprovider","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"AccountsProvider"}],"kind":"symbol","identifier":"doc:\/\/com.staq.TrustlessSDK\/documentation\/TrustlessSDK\/AccountsProvider","abstract":[{"type":"text","text":"Provides functionality for managing user accounts."}],"title":"AccountsProvider","role":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"AccountsProvider"}]},"doc://com.staq.TrustlessSDK/documentation/TrustlessSDK/KYCStepsManagerArticle":{"identifier":"doc:\/\/com.staq.TrustlessSDK\/documentation\/TrustlessSDK\/KYCStepsManagerArticle","abstract":[{"type":"text","text":"A class responsible for managing an individual step in the KYC process."}],"title":"KYC Steps Manager","url":"\/documentation\/trustlesssdk\/kycstepsmanagerarticle","kind":"article","role":"article","type":"topic"},"doc://com.staq.TrustlessSDK/documentation/TrustlessSDK/ResultCallback":{"kind":"symbol","fragments":[{"text":"typealias","kind":"keyword"},{"kind":"text","text":" "},{"kind":"identifier","text":"ResultCallback"}],"title":"ResultCallback","identifier":"doc:\/\/com.staq.TrustlessSDK\/documentation\/TrustlessSDK\/ResultCallback","type":"topic","url":"\/documentation\/trustlesssdk\/resultcallback","abstract":[{"text":"A typealias for a callback function that is invoked with a ","type":"text"},{"code":"ResultValue","type":"codeVoice"},{"type":"text","text":"."}],"role":"symbol","navigatorTitle":[{"text":"ResultCallback","kind":"identifier"}]},"doc://com.staq.TrustlessSDK/documentation/TrustlessSDK/CardsProvider":{"abstract":[{"text":"Provides functionality for managing cards.","type":"text"}],"identifier":"doc:\/\/com.staq.TrustlessSDK\/documentation\/TrustlessSDK\/CardsProvider","title":"CardsProvider","type":"topic","url":"\/documentation\/trustlesssdk\/cardsprovider","role":"symbol","kind":"symbol","navigatorTitle":[{"text":"CardsProvider","kind":"identifier"}],"fragments":[{"text":"protocol","kind":"keyword"},{"kind":"text","text":" "},{"kind":"identifier","text":"CardsProvider"}]},"https://developer.apple.com/documentation/swift/string":{"type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/swift\/string","url":"https:\/\/developer.apple.com\/documentation\/swift\/string","title":"String","titleInlineContent":[{"text":"String","type":"text"}]},"doc://com.staq.TrustlessSDK/documentation/TrustlessSDK/PaginatorArticle":{"type":"topic","identifier":"doc:\/\/com.staq.TrustlessSDK\/documentation\/TrustlessSDK\/PaginatorArticle","title":"Paginator Usage","role":"article","kind":"article","url":"\/documentation\/trustlesssdk\/paginatorarticle","abstract":[{"type":"text","text":"Sending and handling paginated requests: Paginator helper."}]},"doc://com.staq.TrustlessSDK/documentation/TrustlessSDK/TrustlessError":{"role":"symbol","navigatorTitle":[{"text":"TrustlessError","kind":"identifier"}],"title":"TrustlessError","identifier":"doc:\/\/com.staq.TrustlessSDK\/documentation\/TrustlessSDK\/TrustlessError","kind":"symbol","abstract":[{"type":"text","text":"Describes errors that can occur within the TrustlessSDK."}],"type":"topic","fragments":[{"kind":"keyword","text":"enum"},{"text":" ","kind":"text"},{"text":"TrustlessError","kind":"identifier"}],"url":"\/documentation\/trustlesssdk\/trustlesserror"},"doc://com.staq.TrustlessSDK/documentation/TrustlessSDK":{"abstract":[],"kind":"symbol","role":"collection","url":"\/documentation\/trustlesssdk","identifier":"doc:\/\/com.staq.TrustlessSDK\/documentation\/TrustlessSDK","type":"topic","title":"TrustlessSDK"},"doc://com.staq.TrustlessSDK/documentation/TrustlessSDK/IntegrationArticle":{"kind":"article","title":"Integration","identifier":"doc:\/\/com.staq.TrustlessSDK\/documentation\/TrustlessSDK\/IntegrationArticle","type":"topic","url":"\/documentation\/trustlesssdk\/integrationarticle","abstract":[{"text":"Integration of TrustlessSDK: Client Secrets and Client Certificate.","type":"text"}],"role":"article"},"doc://com.staq.TrustlessSDK/documentation/TrustlessSDK/AuthProvider":{"type":"topic","identifier":"doc:\/\/com.staq.TrustlessSDK\/documentation\/TrustlessSDK\/AuthProvider","fragments":[{"text":"protocol","kind":"keyword"},{"kind":"text","text":" "},{"kind":"identifier","text":"AuthProvider"}],"title":"AuthProvider","navigatorTitle":[{"text":"AuthProvider","kind":"identifier"}],"role":"symbol","kind":"symbol","url":"\/documentation\/trustlesssdk\/authprovider","abstract":[{"type":"text","text":"Provides functionality for performing user authentication processes."}]}}}